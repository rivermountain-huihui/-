RDB和AOF的优缺点

RDB：

RDB的优点：

* 性能好，可以创建子进程进行后台备份，基本不会影响主进程的读写操作
* 备份文件比AOF小，RDB在恢复大量数据时比AOF快
* 就像快照，可以保存多个版本的数据，恢复的时候可以选择要恢复成哪个版本

RDB的缺点：

* 如果发生断电、宕机等情况，那么在两个保存点之间的数据会丢失
* 当数据量比较大时，主进程fork一个子进程需要一点时间，而这段时间因为redis的单线程缘故，会发生阻塞，数据无法读写

AOF：

AOF的优点：

* 安全，根据保存模式，要么是每秒系统把内存中的数据写入磁盘中的AOF日志，要么是每次发生数据改变就立即把内存中的数据改变写入磁盘中的AOF日志，相对RDB来说数据更安全
* 追加写入的模式，写入数据更加快速
* 重写功能，根据触发条件或者手动重写，可以减少一部分AOF日志大小
* AOF是一个格式清晰、易于理解的日志，可以直接对AOF本身进行修改

AOF的缺点：

* 备份文件会比RDB大
* 发生bug的情况比RDB多
* AOF的速度根据fsync策略的不同，可能慢于RDB